"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[564],{60564:function(e,t,n){n.r(t),n.d(t,{ComponentContext:function(){return S},ComponentProvider:function(){return D},createComponentStore:function(){return C},useComponentStore:function(){return G}});var r=n(81862),o=n(94761),i=n(12330),l=n(35565),u=n(5163),s=(n(44936),n(96391),n(87246),n(44718),n(69460),n(17385),n(92374),n(91560),n(16120),n(31002),n(60452),n(23395),n(80978),n(11183),n(93801),n(78529),n(85523)),c=n(35457),a=n(65362),d=n(90254),f=n(73366),p=n(9797),m=n(4223),v=n(12361),_=n(95239),g=n(19126),h=n(88578),I=n(30204),y=n(37847),x=n(88882),T=n(91570),L=n(55406),P=n(49346),k=function(e){function t(){return e.apply(this,arguments)}return(0,P._)(t,e),t}(x.Y),w=n(13693),R=(0,T.fz)((function(e){var t={nodeCommon:{},context:{},$service:{},goodsList:[],recommendGoodsList:[],offset:0,hasMore:!0,status:L.sB.EMPTY,limit:20,isShowViewMore:!1,isShowPolicy:!1,filterList:[],selectedFilter:[],isFilterDataLoaded:!1,hoverObj:{text:"",x:-100,y:0},categoryList:[],optId:"",vrParams:{cmmDsId:"",secOptId:"",title:"",recPoolId:""},listId:(0,c.x)(),isVrDs:!1,activityName:"",disableItemList:[],linkUrl:"",hasFirstReqLoaded:!1};return(0,h.M)()((0,a.n)((function(n,a){return(0,o._)({},t,e,{setHoverText:function(e,t,r){n((function(n){n.hoverObj={text:e,x:t,y:r}}))},setIsVrDs:function(e){n((function(t){t.isVrDs=e}))},setGoodsList:function(e){n((function(t){t.goodsList=e}))},initService:function(){n((function(e){e.$service=new k(a().context.$axiosHttp)}))},getInitialProps:(0,r._)((function(e){var t,r,o,i,l,c,d,f,p,m;return(0,u.Jh)(this,(function(u){switch(u.label){case 0:return t=e.isServer,r=a(),o=r.initService,i=r.nodeCommon.props,l=r.goodsList,c=r.queryGoodsList,d=r.setVrParams,f=r.setIsVrDs,r.__innerGlobalStore,o(),(p=i.dsId)!==x.y.VR002&&p!==x.y.VR001||(f(!0),d()),(null==l?void 0:l.length)?[3,2]:[4,c(t)];case 1:u.sent(),u.label=2;case 2:return n((function(e){e.hasFirstReqLoaded=!0})),m=a().status,t||m!==L.sB.FAILED||i.goodsEmpty!==L.mY.GO_DEFAULT||(0,s.r1)({errorType:s.RN.GOODS_EMPTY}),[2]}}))})),setVrParams:function(){var e,t,r,o=((null!=(r=null==(t=a())||null==(e=t.__innerGlobalStore)?void 0:e.getState())?r:{}).sysInfo||{}).query;n((function(e){e.vrParams={cmmDsId:null==o?void 0:o.cmm_ds_id,secOptId:null==o?void 0:o.sec_opt_id,title:null==o?void 0:o.view_all_title,recPoolId:null==o?void 0:o.pool_id}}))},queryGoodsList:(0,r._)((function(e){var t,r,s,c,v,h,x,T,P,k,R,S,D,G,C,E,A,O,F,U,q,b,j,B,N,M,V,Y,$,z,H,J,Q,K,W,Z,X,ee,te,ne,re,oe,ie,le,ue,se,ce,ae,de,fe,pe,me,ve,_e,ge,he,Ie,ye,xe,Te,Le,Pe,ke,we,Re;return(0,u.Jh)(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),r=a(),s=r.offset,c=r.status,v=r.nodeCommon,h=v.props,x=v.customName,T=v.pageBase,P=v.sysInfo,k=r.$service,R=r.context,S=r.vrParams,D=r.listId,G=r.isVrDs,C=h.limit,E=void 0===C?L.UZ:C,A=h.dsId,O=h.card,F=h.type,U=h.optRecType,q=h.activityName,b=h.poolId,j=h.skipPageTitle,B=h.manualTopGoods,N=(null==(t=(0,d.hb)(R))?void 0:t.leoProxyInfo)||{},M=(null==N?void 0:N.tmpl)?(0,_.ru)((0,o._)({},N),"https://www.temu.com/kuiper/"+(null==N?void 0:N.tmpl)+".html"):"",V=M?{penetrateParams:{tt_referer:M}}:{},c===L.sB.PENDING?[2]:(Y=(0,o._)({dsId:A,offset:s,limit:E,listId:D,goodsCardItemType:null==O?void 0:O.cardType,recPoolId:b,manualTopGoods:B,goodsPoolParam:b?{poolId:b,title:j||"",cmmDsId:A}:j?{title:j}:void 0},V),q&&(Y.activityName=q),G&&(Y=(0,o._)({},Y,{dsId:null==S?void 0:S.cmmDsId,secOptId:null==S?void 0:S.secOptId,recPoolId:null==S?void 0:S.recPoolId})),F===L.oY.TAB_NEW&&(Y.optRecType=U,Y.useCondition=!1,Y.needCategoryRec=!0,z=f.jU?window.location.search:null==R||null==($=R.__req)?void 0:$.originalUrl,H=(0,g.parse)(z,{ignoreQueryPrefix:!0}),Y.optId=H.optId||"",Y.optType=H.optType||"",n((function(e){e.optId=H.optId||""}))),L.oY.FILTER===F&&(Y.useCondition=!0,Y.needCategoryRec=F===L.oY.FILTER,W=f.jU?null==(Q=window)||null==(J=Q.location)?void 0:J.search:null==R||null==(K=R.__req)?void 0:K.originalUrl,Z=(0,g.parse)(W,{ignoreQueryPrefix:!0}),Y.filterItems=Z.filterItems||"",Y.optId=Z.optId||"",Y.optType=Z.optType||"",X=Z.activity_name||"",n((function(e){e.optId=Z.optId||"",e.activityName=X}))),n((function(e){e.status=L.sB.PENDING})),[4,k.fetchGoodsList(Y)]);case 1:for(ee=u.sent(),te=ee.kpDsItemList,ne=ee.filterRegion,re=ee.categoryRecResult,oe=ee.hasMore,ie=ee.message,ee.subTabList,le=ee.linkUrl,ue=ee.disableItemList,se=0,ce=te||[];se<ce.length;se++)if(null==(ae=ce[se])?void 0:ae.commonRecGoods){pe=null==R||null==(fe=R.__req)||null==(de=fe.app)?void 0:de.logger,me=ae.commonRecGoods,ve=me.priceInfo,ge=(_e=void 0===ve?{}:ve).marketPriceText,he=_e.reductionText,Ie=!Array.isArray(ge),ye=!Array.isArray(he),xe="{}";try{xe=JSON.stringify({market_price_text:void 0===ge?"undefined":ge,reduction_text:void 0===he?"undefined":he})}catch(e){xe="{}"}e&&(Ie||ye)?null==pe||pe.info("ds_market_or_reduction_price_text_is_not_array",{logValue:xe,req:null==R?void 0:R.__req}):f.jU&&(Ie||ye)&&(0,w.h)("ds_market_or_reduction_price_text_is_not_array",{customTags:{data:xe},rate:1})}if(re&&(Te=(0,p.nI)(R).t,n((function(e){e.categoryList=[{optName:Te("masonry.recommended"),optId:"",optType:""}].concat((null==re?void 0:re.optList)||[])}))),ne&&n((function(e){var t,n,r;e.isFilterDataLoaded=!0;var l,u=[];null==ne||null==(n=ne.rankSorter)||null==(t=n.filters)||t.forEach((function(e){Object.assign(e,{isSection:!0}),(null==e?void 0:e.selected)&&u.push(e)})),e.selectedFilter=u.concat(ne.selectedFilter);var s=null!=(l=null==ne||null==(r=ne.innerFilter)?void 0:r.filterList)?l:[];e.filterList=s.map((function(e){var t=e.filters,n=void 0===t?[]:t,r=e.viewMore,l=(0,i._)(e,["filters","viewMore"]),u=n.map((function(e){return e.selected})).lastIndexOf(1)+1,s=Math.ceil(Math.max(.1,u)/r);return(0,o._)({},l,{viewMore:r,filters:n.slice(0,s*r),$filters:n.slice(s*r)})}))})),!(null==te?void 0:te.length)&&![L.oY.FILTER].includes(F))throw new Error(ie||(0===s?"first screen goods empty":"queryGoodsList error"));return n((function(e){e.disableItemList=ue||[],e.goodsList=(0,l._)(0==s?[]:e.goodsList).concat((0,l._)((0,y.yq)(te,{cardTrackingInfo:{card_type:I.mq.CARD_DEFAULT,custom_name:x},pageBase:T,sysInfo:P}))),e.offset+=E;var t=e.nodeCommon.props,n=t.limitMode,r=t.type,o=n===L.yx.LIMITED&&r===L.oY.NORMAL;e.hasMore=!o&&!!oe,le&&(e.linkUrl=le)})),n((function(e){e.status=L.sB.DONE})),[3,3];case 2:return Le=u.sent(),Re=!!(null==(we=a())||null==(ke=we.nodeCommon)||null==(Pe=ke.pageBase)?void 0:Pe.isBot),f.jU?(n((function(e){e.hasMore=!1,e.status=L.sB.FAILED})),Re||(0,m.HG)(Le)):n((function(e){e.status=L.sB.DONE})),[3,3];case 3:return[2]}}))})),onFilterItemClick:function(e,t,r){var o=e.filter,i=e.isSection;n((function(e){e.offset=0,e.listId=(0,c.x)();var n=[];e.filterList.forEach((function(e){var l=e.filters,u=e.multi;l.forEach((function(e){e.filter===o?(e.selected=t&&r?1:e.selected?0:1,e.minPrice=t,e.maxPrice=r):(0===u||e.isSection&&i)&&(e.selected=0);var l=e.filter,s=e.minPrice,c=e.maxPrice,a=e.name,d="Z104:"===e.filter&&s&&c;e.selected&&n.push({filter:d?""+l+s+","+c:l,name:a,selected:1})}))})),e.selectedFilter=n}));var l=a().selectedFilter.map((function(e){return e.filter})).join("|");(0,v.qz)({filterItems:l}),a().queryGoodsList()},reset:function(e){var t=a().selectedFilter,r=e?t.filter((function(t){var n=t.filter;return n!==e&&0!==n.indexOf(e)})):[];n((function(e){e.selectedFilter=r,e.offset=0,e.listId=(0,c.x)()}));var o=r.map((function(e){return e.filter})).join("|");(0,v.qz)({filterItems:o}),a().queryGoodsList()},appendFilterList:(0,r._)((function(e){var t;return(0,u.Jh)(this,(function(r){return t=e.identifier,n((function(e){e.filterList.forEach((function(e){var n=e.identifier,r=e.filters,o=e.$filters,i=e.viewMore;t===n&&(e.filters=r.concat(null==o?void 0:o.slice(0,i)),e.$filters=null==o?void 0:o.slice(i))}))})),[2]}))}))})})))})),S=R.ComponentContext,D=R.ComponentProvider,G=R.useComponentStore,C=R.createComponentStore},20407:function(e,t,n){n.d(t,{Ig:function(){return c},pt:function(){return d},yq:function(){return a}});var r=n(94761),o=n(12330),i=(n(17385),n(91560),n(60452),n(23395),n(1205),n(67904),n(87246),n(91851)),l=n(97852),u=n(95239),s=n(7872),c=function(e,t){void 0===t&&(t="");var n=e||{},r=n.priceStr,o=n.priceText,i=n.marketPriceText,l=n.reductionText,u=n.appPromotionPriceText,s=n.appPromotionReductionText;return{showPriceStr:(o?o[1]:r)||t,unitPrefix:o?o[0]:"",unitSuffix:o?o[2]:"",showMarketPriceStr:i&&i.length?i.join(""):"",reductionText:l,showAppPromotionPriceText:u&&u.length?u.join(""):"",showPromotionReductionText:s&&s.length?s.join(""):"",marketPriceText:i,priceText:o}},a=function(e,t){void 0===e&&(e=[]);var n=function(e){return null==e?void 0:e.some((function(e){var t,n,r,o;return(null==e||null==(n=e.commonRecGoods)||null==(t=n.image)?void 0:t.width)!==(null==e||null==(o=e.commonRecGoods)||null==(r=o.image)?void 0:r.height)}))}(e);return e.map((function(e,c){var a,d,f,p,m,v,_,g,h,I=e.commonRecGoods,y=e.dsItemType,x=e.image,T=I||{},L=T.pRec,P=T.pSearch,k=T.ad,w=T.mRec,R=T.mTrc,S=T.linkUrl,D=T.seoLinkUrl,G=(0,o._)(T,["pRec","pSearch","ad","mRec","mTrc","linkUrl","seoLinkUrl"]);return{type:i.i.NORMAL_GOODS,index:c,data:(0,r._)({cardTrackingInfo:null!=(h=null==t?void 0:t.cardTrackingInfo)?h:{},dsItemType:y,allLongImage:n,themeCard:x,pRec:(0,l.or)(L),pSearch:(0,l.or)(P),ad:(0,l.or)(k),mRec:(0,l.or)(w),mTrc:(0,l.or)(R)},G,{linkUrl:(0,s.Y7)((null==t||null==(a=t.sysInfo)?void 0:a.userAgent)||"")&&(null==t||null==(d=t.pageBase)?void 0:d.tmpl)&&["dk3","dk8"].includes(null==t||null==(f=t.pageBase)?void 0:f.tmpl)?(0,u.ru)({r_pid:null==t||null==(p=t.pageBase)?void 0:p.subj,r_idx:c},S):S,seoLinkUrl:(0,s.Y7)((null==t||null==(m=t.sysInfo)?void 0:m.userAgent)||"")&&(null==t||null==(v=t.pageBase)?void 0:v.tmpl)&&["dk3","dk8"].includes(null==t||null==(_=t.pageBase)?void 0:_.tmpl)?(0,u.ru)({r_pid:null==t||null==(g=t.pageBase)?void 0:g.subj,r_idx:c},D):D,reportIndex:null==t?void 0:t.reportIndex})}}))},d=function(e){return"string"!=typeof e?e:(e.startsWith("http")||e.startsWith("/")||(e="/"+e),e.split("?")[0])}},37847:function(e,t,n){n.d(t,{Ig:function(){return r.Ig},T9:function(){return o.T9},pt:function(){return r.pt},yq:function(){return r.yq}});var r=n(20407),o=n(31879)},31879:function(e,t,n){n.d(t,{T9:function(){return u},zy:function(){return l}});var r=n(94761),o=n(97852),i=n(29400),l=function(e,t){return e?{m_rec:(0,o.or)(e.mRec),p_rec:(0,o.or)(e.pRec),ad:(0,o.or)(e.ad),p_search:(0,o.or)(e.pSearch),m_trc:(0,o.or)(e.mTrc)}:{}},u=function(e){var t,n,u=e.data,s=e.index,c=(0,i.CA)((function(e){return e.nodeInfo})).customName;return(0,r._)({custom_name:c},function(e,t){return(0,r._)({idx:t,goods_id:null==e?void 0:e.goodsId,card_type:null==e?void 0:e.dsItemType},l(e,t))}(u,s),(0,o.At)(null!=(t=null==u?void 0:u.tracking)?t:{}),null!=(n=null==u?void 0:u.algoTracking)?n:{})}},88882:function(e,t,n){var r;n.d(t,{Y:function(){return l},y:function(){return r}}),function(e){e.G006="g006",e.G008="g008",e.CAT002="cat002",e.G020="g020",e.VR002="vr002",e.VR001="vr001",e.G040="g040",e.SC002="sc002",e.REC001="rec001",e.G033="g033",e.G017="g017",e.G019="g019"}(r||(r={}));var o=n(49346),i=n(37272),l=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).fetchGoodsList=function(e){return t.post({url:i.vh.KP_DS,params:e}).then((function(e){return(null==e?void 0:e.result)||{}})).catch((function(e){return e}))},t}return(0,o._)(t,e),t}(n(17163).m)},37940:function(e,t,n){n.d(t,{v:function(){return v}});var r,o=n(81862),i=n(35565),l=n(5163),u=(n(22979),n(91211),n(70309),n(99492),n(17385),n(69460),n(93801),n(44936),n(80978),n(11183),n(76635)),s=n(73366),c=n(4223),a=n(21349),d=n(81518),f=new Set([]),p=new Set([]);var m=(0,u.debounce)((0,o._)((function(){var e,t,n,o,u,m,v,_,g;return(0,l.Jh)(this,(function(l){switch(l.label){case 0:if(n=(0,i._)(new Set((0,i._)(f).concat((0,i._)(null!=(t=null==(e=window)?void 0:e[a.wD])?t:[])))).filter((function(e){return!p.has(e)})),f.clear(),0===n.length)return[2];s.jU&&!r&&(r=(0,d.ej)()),o=r,l.label=1;case 1:return l.trys.push([1,3,,4]),[4,null==o||null==(u=o.post)?void 0:u.call(o,"/api/generic/fargo/text/key/record",{text_keys:n})];case 2:if(!(null==(m=l.sent())?void 0:m.success))throw new Error("error code: "+(null==m?void 0:m.error_code));for(v=0;v<n.length;v++)_=n[v],p.add(_);return[3,4];case 3:return g=l.sent(),(0,c.vR)(new Error("report text mid i18n key error "+(null==g?void 0:g.message)+" keys: "+n.join(","))),[3,4];case 4:return[2]}}))})),5e3);function v(e){!s.jU||p.has(e)||f.has(e)||s.kk||(f.add(e),m())}},9797:function(e,t,n){n.d(t,{nI:function(){return f},df:function(){return v}});var r=n(62960),o=(n(2778),n(5127),n(17385),n(80417),n(40812),n(87246),n(21295),n(60647),n(21531),n(91560),n(73366)),i=n(63394),l=n(89166),u=n.n(l),s=(n(87184),n(35565)),c=(n(22979),n(91211),n(70309),n(99492),n(69460),n(21349)),a=n(37940);function d(e,t){return function(e,n){for(var r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];return(null==n?void 0:n.ns)!==c.QA&&(null==t?void 0:t.ns)!==c.QA||(0,a.v)(e),t.apply(void 0,[e,n].concat((0,s._)(o)))}}n(21725);function f(e){return o.jU?function(e){e.t=d(0,e.t);var t=e.getFixedT;return e.getFixedT=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return d(0,t.apply(void 0,(0,s._)(n)))},e}(i.ZP):null==e||null==(t=e.__req)?void 0:t.i18n;var t}var p=function(e,t,n){if(e=e||"",!t)return e;var o=Object.entries(t).reduce((function(e,t){var n=(0,r._)(t,2),o=n[0],i=n[1],l=new RegExp(u()("{{"+o+"}}"),"g");return e.replace(l,i||"")}),e);return n?o.replace(/<[^<>]*?>/g,""):o};function m(e,t,n,r,i){var l,u=o.kk?n:null!=(l=null==e?void 0:e(t))?l:n,s=p(u,r);return i?s.replace(/<[^<>]*?>/g,""):s}function v(e,t,n,r,o){return{str:m(e,t,n,r,!0),html:m(e,t,n,o)}}},35457:function(e,t,n){n.d(t,{x:function(){return r}});var r=(0,n(52645).kP)("abcdefghijklmnopqrstuvwxyz",10)}}]);
//# sourceMappingURL=http://temudebug.com/sourcemaps/assets/js/564_9365d19b9d683d3488d7.js.map